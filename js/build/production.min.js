define(["dojo/_base/lang","dojo/dom","dojo/dom-construct","dojo/on","dojo/_base/array","dojo/dom-class","dojo/dom-style","dojo/query"],function(a,b,c,d,e,f,g,h){var j=function(b){var j={title:"Items",addNewItems:!1,node:null,items:[]};a.mixin(j,b);var k=this;this.boxNode=null,this.render=function(){c.empty(j.node);var a=c.create("div",{"class":"chsdk-list-box"}),b=c.create("div",{"class":"list-container"});c.place("<span class='list-title'>"+j.title+"</span>",b),c.place("<input type='text' class='list-search-box' placeholder='Search for "+j.title+" ...' />",b),j.addNewItems&&(c.place("<div class='vertical-line-separator'>|</div>",b),c.place("<span class='new-item-button'> <span class='plus-sign'>+</span>	new</span>",b));var i=c.create("div",{"class":"items-container"});e.forEach(j.items,function(a){c.place("<span class='list-item'>"+a.name+"</span>",i)}),c.place(i,b),c.place(b,a),c.place("<span class='remove-item-button'> <span class='cross-sign'>X</span>	Remove</span>",a),h(".list-item",i).forEach(function(a){d(a,"click",function(){h(".selected",k.boxNode).forEach(function(b){b!==a&&f.remove(b,"selected")}),f.add(a,"selected")})}),d(h(".list-search-box",a)[0],"keyup",function(a){var b=this.value;h(".list-item",i).forEach(function(a){var c=RegExp(b,"i");c.test(a.innerText)?g.set(a,"display","block"):g.set(a,"display","none")})}),k.boxNode=a,c.place(a,j.node)},this.addItem=function(a){j.items.push(a),k.rebuild()},this.removeItem=function(a){var b=k.searchItem(a);j.items.splice(b,1),k.rebuild()},this.getItemIndex=function(a){for(i in j.items)if(j.items[i].name===a)return i;return-1},this.rebuild=function(){var a=h(".items-container",k.boxNode)[0];c.empty(a),e.forEach(j.items,function(b){c.place("<span class='list-item'>"+b.name+"</span>",a)}),h(".list-item",a).forEach(function(b){d(b,"click",function(){h(".selected",a).forEach(function(a){a!==b&&f.remove(a,"selected")}),f.add(b,"selected")})}),d(h(".list-search-box",k.boxNode)[0],"keyup",function(b){var c=this.value;h(".list-item",a).forEach(function(a){var b=RegExp(c,"i");b.test(a.innerText)?g.set(a,"display","block"):g.set(a,"display","none")})})},this.setNewItems=function(a){j.items=a,k.rebuild()},this.handleItemClick=function(a){"function"==typeof a&&h(".list-item",k.boxNode).forEach(function(b){d(b,"click",a)})},this.handleAddItemClick=function(a){"function"==typeof a?d(h(".new-item-button",k.boxNode)[0],"click",function(){a()}):console.log("An invalid handler is specified!")},this.handleRemoveItemClick=function(a){"function"==typeof a?d(h(".remove-item-button",k.boxNode)[0],"click",function(){a()}):console.log("An invalid handler is specified!")}};return j}),require(["dojo/ready","dojo/_base/array","dojo/_base/lang","dojo/query","dojo/on"],function(a,b,c,d,e){var f=[{login:"user",password:"user"},{login:"admin",password:"admin"}],g=function(a,c){var d=!1;return b.some(f,function(b){return b.login===a&&b.password===c?(d=!0,!1):void 0}),d};a(function(){var a=document.getElementById("login-button");e(a,"click",function(){var a=document.getElementById("login").value,b=document.getElementById("pwd").value;console.log(a+" -- "+b+" -- "+g(a,b)),g(a,b)?(localStorage.setItem("username",a),window.location.replace("index.html")):alert("The provided data is invalid !")})})}),require(["myLibs/listBox","dojo/ready","dojo/_base/xhr","dojo/_base/array","dojo/_base/lang","dojo/query"],function(a,b,c,d,e,f){var g={companies:[{id:1,name:"Test Company 1",departments:[{id:1,name:"Department 1",employees:[{id:1,name:"Mohamed Ben Mohamed"},{id:2,name:"Mariem Ben Mariem"},{id:3,name:"Ahmed Ben Ahmed"}]},{id:2,name:"Department 2"},{id:3,name:"Department 3"}]},{id:2,name:"Test Company 2",departments:[{id:1,name:"First Department",employees:[]},{id:2,name:"Second Department",employees:[]},{id:3,name:"Third Department",employees:[]}]},{id:3,name:"Test Company 3",departments:[{id:1,name:"Test Department 1",employees:[]},{id:2,name:"Test Department 2",employees:[]},{id:3,name:"Test Department 3",employees:[]}]}]};b(function(){var b=g.companies,c=[],e=[],h=null,i=document.getElementById("newEmpModal"),j=document.getElementById("deleteConfirmModal"),k=new a({title:"Companies",node:"companiesNode",items:b});k.render();var l=new a({title:"Departments",node:"departmentsNode"});l.render();var m=new a({title:"Employees",node:"employeesNode",addNewItems:!0});m.render(),k.handleItemClick(function(){var a=f(".selected",k.boxNode)[0].innerText,c=k.getItemIndex(a);deps=b[c].departments,l.setNewItems(deps),l.handleItemClick(function(){var a=f(".selected",l.boxNode)[0].innerText,b=l.getItemIndex(a);e=deps[b].employees,m.setNewItems(e)})}),k.handleRemoveItemClick(function(){h="Companies",j.style.display="block"}),l.handleRemoveItemClick(function(){h="Departments",j.style.display="block"}),m.handleRemoveItemClick(function(){h="Employees",j.style.display="block"});var n=document.getElementById("confirm-delete-button"),o=document.getElementById("confirm-cancel-button");n.onclick=function(){switch(h){case"Companies":if("undefined"!=typeof f(".selected",k.boxNode)[0]){var a=f(".selected",k.boxNode)[0].innerText,c=k.getItemIndex(a);b.splice(c,1),k.setNewItems(b)}else alert("Please Select the item you want to delete!");break;case"Departments":if("undefined"!=typeof f(".selected",l.boxNode)[0]){var d=f(".selected",l.boxNode)[0].innerText,c=l.getItemIndex(d);deps.splice(c,1),l.setNewItems(deps)}else alert("Please Select the item you want to delete!");break;case"Employees":if("undefined"!=typeof f(".selected",m.boxNode)[0]){var g=f(".selected",m.boxNode)[0].innerText,c=m.getItemIndex(g);e.splice(c,1),m.setNewItems(e)}else alert("Please Select the item you want to delete!")}j.style.display="none"},o.onclick=function(){j.style.display="none"};var p=document.getElementById("close1"),q=document.getElementById("close2"),r=document.getElementById("company-select"),s=document.getElementById("dep-select");m.handleAddItemClick(function(){d.forEach(b,function(a){var b=document.createElement("option");b.value=a.name,b.innerText=a.name,r.appendChild(b)});var a=b[0];d.forEach(a.departments,function(a){var b=document.createElement("option");b.value=a.name,b.innerText=a.name,s.appendChild(b)}),i.style.display="block"}),r.onchange=function(){s.options.length=0;var a=k.getItemIndex(this.value);c=b[a].departments,d.forEach(c,function(a){var b=document.createElement("option");b.value=a.name,b.innerText=a.name,s.appendChild(b)})};var t=document.getElementById("add-button");t.onclick=function(){var a={name:document.getElementById("name-input").value,email:document.getElementById("email-input").value,phone:document.getElementById("phone-input").value,celphone:document.getElementById("celphone-input").value,location:document.getElementById("location-input").value},b=r.value,c=s.value;d.some(g.companies,function(e){e.name===b&&d.some(e.departments,function(b){return b.name===c?(b.employees.push(a),m.setNewItems(b.employees),m.rebuild(),!1):void 0})}),i.style.display="none",s.options.length=0,r.options.length=0},p.onclick=function(){s.options.length=0,r.options.length=0,i.style.display="none"},q.onclick=function(){s.options.length=0,r.options.length=0,j.style.display="none"},window.onclick=function(a){a.target!==i&&a.target!==j&&a.preventDefault()}})});